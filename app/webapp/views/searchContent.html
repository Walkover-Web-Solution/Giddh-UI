<!-- structure -->

<div class="container-fluid">
  <div class="row">
    <!-- left side -->
    <div class="col-xs-3 greyBg">
      <div class="row">
        <div id="left">
          
          <div class="loader mrT4" ng-hide="searchLoader">
            <span></span>
            <span></span>
            <span></span>
            <span></span>
            <span></span>
          </div>
          
          <perfect-scrollbar class="scrClass" wheel-propagation="true" wheel-speed="1" min-scrollbar-length="20" auto-height suppress-  scroll-x="true">
            
            <form name="searchFormClb" novalidate class="col-xs-12" ng-if="searchLoader">
              <p class="lead mrT2">Search Creditors</p>

              <div class="form-group">
                <label>Select Groups</label>
                <input ng-model="searchFormData.group" 
                type="text" autocomplete="off"
                name="searchFormClb.group" required
                placeholder="Group name" class="form-control" required
                uib-typeahead="groups as groups.name for groups in flattenGroupList | filter:{name: $viewValue} | limitTo:8"/>
              </div>
                  
              <div class="form-group">
                <label>From date</label>
                <p class="input-group">
                  <input type="text" class="form-control"
                       uib-datepicker-popup="{{format}}" required
                       datepicker-options="dateOptions"
                       is-open="fromDatePickerIsOpen"
                       ng-click="fromDatePickerOpen()"
                       ng-model="searchFormData.fromDate"
                       max-date="earchFormData.toDate"
                       placeholder="from date"
                       name="searchFormClb.fromDate"
                    />
                  <span class="input-group-btn">
                    <button type="button" class="btn btn-default" ng-click="fromDatePickerOpen()"><i class="glyphicon glyphicon-calendar"></i></button>
                  </span>
                </p>
              </div>

              <div class="form-group">
                <label>To date</label>
                <p class="input-group">
                  <input type="text" class="form-control"
                         uib-datepicker-popup="{{format}}" required
                         datepicker-options="dateOptions"
                         is-open="toDatePickerIsOpen"
                         ng-click="toDatePickerOpen()"
                         ng-model="searchFormData.toDate" 
                         min-date="searchFormData.fromDate" 
                         max-date="today" 
                         placeholder="to date"
                         required
                         name="searchFormClb.toDate"
                      />
                  <span class="input-group-btn">
                    <button type="button" class="btn btn-default" ng-click="toDatePickerOpen()"><i
                      class="glyphicon glyphicon-calendar"></i></button>
                  </span>
                </p>
              </div>

              <div class="mrB4">
                <button ng-disabled="searchFormClb.$invalid" class="btn btn-primary btn-block" ng-click="getClosingBalance(searchFormData)">Go</button>
              </div>

            </form>      
          </perfect-scrollbar>
          <!-- end of left content -->

        </div>
      </div>
    </div>

    <!-- middle body -->
    <div class=" col-xs-9" >
      <div class="middleBody bdrR bdrL row" auto-height> 
        
        <div class="no-data" ng-if="noData">
          <h1>Sorry, No Data Found!</h1>
          <img src="/public/webapp/images/no-data.png" alt="">
        </div>

        <!-- result -->
        <section class="pd2">

          <section class="greyBg pd2">
            
            <p class="lead">Filter by:</p>
            <form name="searchQueryForm" id="searchQueryForm" class="">

              <!-- repeater -->
              <div class="clearfix form-group" ng-repeat="item in srchDataSet track by $index">
                <label>Get those account whose</label>
                <span>
                  <select 
                    required
                    class="form-control"
                    name="queryType" 
                    ng-model="item.queryType"
                    ng-options="item for item in queryType">
                  </select>
                </span>
                <label ng-if="item.queryType === 'Closing' || item.queryType === 'Opening' ">balance  &nbsp;</label>
                <label>is</label>
                <span>
                  <select 
                    required
                    class="form-control"
                    name="queryDiffer" 
                    ng-model="item.queryDiffer"
                    ng-options="item for item in queryDiffer">
                  </select>
                </span>
                <label ng-if="item.queryDiffer === 'Less' || item.queryDiffer === 'Greater' ">than  &nbsp;</label>
                <label ng-if="item.queryDiffer === 'Equals' ">to  &nbsp;</label>
                <span style="margin-right:0">
                  <input required style="width:100px" class="form-control" type="text" placeholder="amount">
                </span>
                <span style="margin-left:0">
                  <select 
                    required
                    class="form-control"
                    name="balType" 
                    ng-model="item.balType"
                    ng-options="item for item in balType">
                  </select>
                </span>
                <label ng-if="secondRow_$index">and</label>
              </div>
              <!-- end of clearfix first row -->
              <!-- end repeater -->
              



              <div class="clearfix form-group">
                <button class="btn btn-default mrR1" ng-click="addSearchRow()">Add New Row</button>
                <button ng-disabled="searchQueryForm.$invalid" class="btn btn-primary" ng-click="searchQuery(srchDataSet)">Search</button>
              </div>
              <!-- end of second row -->
            </form>
            
          </section>
          <!-- end of query section grey bg -->

          <table class="mrT2 table table-bordered table-striped">
          <thead>
            <th>Name</th>
            <th>Opening Bal.</th>
            <th>Cr total</th>
            <th>Dr total</th>
            <th>Closing Bal.</th>
          </thead>
          <tbody>
            <tr ng-repeat="item in searchResult[0].accounts track by $index">
              <td>{{item.name}}</td>
              <td>
                {{item.openingBalance.amount}}
                &nbsp;
                {{item.openingBalance.type}}
              </td>
              <td>{{item.creditTotal}}</td>
              <td>{{item.debitTotal}}</td>
              <td>
                {{item.closingBalance.amount}}
                &nbsp;
                {{item.closingBalance.type}}
              </td>
            </tr>
          </tbody>
        </table>

        </section>
        <!-- end result -->
        

      </div>
    </div>
  </div>
  <!-- end of row -->
</div>

