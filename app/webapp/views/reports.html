<!-- structure -->

<div class="container-fluid">
  <div class="row">
    <!-- left side -->
    <div class="col-sm-3 col-md-4 col-lg-2 greyBg">
      <div class="row">
        <div id="left">
            <div class="loader mrT4" ng-hide="showLedgerBox">
              <span></span>
              <span></span>
              <span></span>
              <span></span>
              <span></span>
            </div>
            <div ng-show="showLedgerBox">
              <perfect-scrollbar class="scrClass" wheel-propagation="true" wheel-speed="1" min-scrollbar-length="20" auto-height suppress-scroll-x="true">
                <h1 class="page-title" style="margin-left:15px; margin-bottom:15px;">Generate Graph</h1>
                <div class="graph-filters col-sm-12 col-md-12">

                  <div class="clearfix">
                    <label>Select Groups</label>
                    <ui-select multiple ng-model="selected.groups" theme="bootstrap">
                        <ui-select-match placeholder="Select Groups">
                          <span  ng-click="removeGroup($item)">{{$item.name}}</span>
                        </ui-select-match >
                        <ui-select-choices repeat="grp in groups| filter: $select.search ">
                          <span ng-bind="grp.name"></span>
                        </ui-select-choices>
                    </ui-select>
                  </div>
                  <div class="clearfix">
                    <label>Select Accounts</label>
                    <ui-select multiple ng-model="selected.accounts" theme="bootstrap">
                        <ui-select-match>
                            <span>{{$item.name}}</span>
                        </ui-select-match>
                        <ui-select-choices repeat="acc in accounts | filter: $select.search ">
                            <span ng-bind="acc.name"></span>
                        </ui-select-choices>
                    </ui-select>
                  </div>
<!--                   <div class="clearfix" ng-hide="selected.groups.length == 1 && selected.accounts.length == 0 || selected.groups.length == 0 && selected.accounts.length == 1">
                    <label>Create Chart By</label>
                    <ui-select ng-model="selected.createChartBy" theme="bootstrap">
                        <ui-select-match>
                            <span>{{$select.selected}}</span>
                        </ui-select-match>
                        <ui-select-choices repeat="param in chartParams">
                            <span ng-bind="param"></span>
                        </ui-select-choices>
                    </ui-select>
                  </div>
                  <div class="clearfix" ng-show="selected.groups.length == 1 && selected.accounts.length == 0 || selected.groups.length == 0 && selected.accounts.length == 1">
                    <label>Create Chart With</label>
                    <ui-select multiple ng-model="selected.createChartByMultiple" theme="bootstrap">
                        <ui-select-match  placeholder="Select Chart Parameters..">
                            <span>{{$item}}</span> 
                        </ui-select-match>
                        <ui-select-choices repeat="param in chartParams | filter: $select.search ">
                            <span ng-bind="param"></span>
                        </ui-select-choices>
                    </ui-select>
                  </div> -->
                  <div class="clearfix">
                    <label>From date</label>
                    <p class="input-group">
                      <input type="text" class="form-control"
                           uib-datepicker-popup="{{format}}" required
                           datepicker-options="dateOptions"
                           is-open="fromDatePickerIsOpen"
                           ng-click="fromDatePickerOpen()"
                           ng-model="fromDate.date"
                           max-date="today"
                           placeholder="from date"
                        />
                      <span class="input-group-btn">
                        <button type="button" class="btn btn-default" ng-click="fromDatePickerOpen()"><i class="glyphicon glyphicon-calendar"></i></button>
                      </span>
                    </p>
                  </div>

                  <div class="clearfix">
                    <label>To date</label>
                    <p class="input-group">
                      <input type="text" class="form-control"
                             uib-datepicker-popup="{{format}}" required
                             datepicker-options="dateOptions"
                             is-open="toDatePickerIsOpen"
                             ng-click="toDatePickerOpen()"
                             ng-model="toDate.date" min-date="" max-date="today" placeholder="to date"
                          />
                      <span class="input-group-btn">
                        <button type="button" class="btn btn-default" ng-click="toDatePickerOpen()"><i
                          class="glyphicon glyphicon-calendar"></i></button>
                      </span>
                    </p>
                  </div>

                  <div class="clearfix">
                    <label>Select Interval</label>
                    <ui-select ng-model="selected.interval" theme="bootstrap">
                        <ui-select-match>
                            <span>{{$select.selected}} Days</span>
                        </ui-select-match>
                        <ui-select-choices repeat="int in intervalVals">
                            <span ng-bind="int"></span>
                        </ui-select-choices>
                    </ui-select>
                  </div>
                  <div class="mrB4">
                    <button class="btn btn-success" ng-click="generateGraph()">Go</button>
                  </div>
                </div>
                <div style="height: 50px;"></div>
              </perfect-scrollbar>
            </div>
            <!-- end of showLedgerBox -->
        </div>
      </div>
    </div>
    <!-- middle body -->
    <div class="col-md-10 col-sm-7">
      <div class="middleBody bdrR bdrL row" auto-height> 
        <div class="loader mrT4" ng-hide="showLedgerBox">
              <span></span>
              <span></span>
              <span></span>
              <span></span>
              <span></span>
        </div>
        <perfect-scrollbar class="scrClass" wheel-propagation="true" wheel-speed="1" min-scrollbar-length="20" auto-height>
          <div class="filter-bar col-sm-12" ng-show="chartDataAvailable && showLedgerBox">
            <!--<div class="pull-left">
              <h1 class="page-title inline">
                Historical Data <span ng-show="chartDataAvailable">for</span>
              </h1>
              <p class="sub-title inline pdR" ng-show="chartDataAvailable" ng-repeat="group in series track by $index" ng-show="selected.groups.length == 1 && selected.accounts.length == 0 || selected.groups.length == 0 && selected.accounts.length == 1">
                  {{ group }}<span ng-hide="$last">, </span>  
              </p>
            </div> -->
            <div class="col-sm-2">
              <label>Select Group/Account</label>
              <ui-select ng-model="selected.filteredGroupsAndAccounts" theme="bootstrap" >
                  <ui-select-match placeholder="Select Group/Account to filter">
                      <span>{{$select.selected.name}}</span>
                  </ui-select-match>
                  <ui-select-choices repeat="unit in GroupsAndAccounts">
                      <span ng-bind="unit.name"></span>
                  </ui-select-choices>
              </ui-select>
            </div>
            <div class="checkbox">
              <label>
                <input type="checkbox" ng-model="selected.filteredGroupsAndAccounts.forfilter.cb.val" ng-change="filterGraph(selected.filteredGroupsAndAccounts.forfilter.cb)"> Closing Balance
              </label>
            </div>
            <div class="checkbox">
              <label>
                <input type="checkbox" ng-model="selected.filteredGroupsAndAccounts.forfilter.cr.val" ng-change="filterGraph(selected.filteredGroupsAndAccounts.forfilter.cr)"> Credit Total
              </label>
            </div>
            <div class="checkbox">
              <label>
                <input type="checkbox" ng-model="selected.filteredGroupsAndAccounts.forfilter.dr.val" ng-change="filterGraph(selected.filteredGroupsAndAccounts.forfilter.dr)"> Debit Total
              </label>
            </div>
          </div>
          <div class="loader mrT4" ng-hide="chartDataAvailable">
              <span></span>
              <span></span>
              <span></span>
              <span></span>
              <span></span>
          </div>
          <div class="col-sm-10 col-sm-offset-1">
            <div class="chart-container" ng-show="chartDataAvailable">
              <canvas id="line" class="chart chart-line" chart-data="chartData"
                chart-labels="labels" chart-legend="true" chart-series="series"
                chart-click="onClick" chart-options="chartOptions">
              </canvas> 
            </div>
          </div>
        </perfect-scrollbar>
      </div>
    </div>
  </div>
  <!-- end of row -->
</div>

